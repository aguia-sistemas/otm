<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  autoReload="true"
	  internalLogLevel="Info"
	  internalLogFile="Logs/internal-nlog.json">
	<variable name="LogDay" value="${date:format=dd}"/>
	enable asp.net core layout renderers
	<extensions>
		<add assembly="NLog.Web.AspNetCore"/>
		<add assembly="NLog.Targets.ElasticSearch"/>
	</extensions>

	the targets to write to
	<targets async="true">
		write logs to file
		<target xsi:type="File" name="allfile" encoding="utf-8"
				layout="${longdate}|${callsite:padding=-20}|${callsite-linenumber}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}"
				fileName="Logs\nlog.log"
				archiveFileName="Logs\Fatal-${shortdate}.txt"
				maxArchiveFiles="15"
				archiveEvery="Day"/>

		<target name="EST01" xsi:type="File" fileName="Logs/EST01.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST02_03" xsi:type="File" fileName="Logs/EST02_03.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST04_05" xsi:type="File" fileName="Logs/EST04_05.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST06_07" xsi:type="File" fileName="Logs/EST06_07.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST08_09" xsi:type="File" fileName="Logs/EST08_09.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST10_11" xsi:type="File" fileName="Logs/EST10_11.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST12_13" xsi:type="File" fileName="Logs/EST12_13.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST14" xsi:type="File" fileName="Logs/EST14.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST15_19" xsi:type="File" fileName="Logs/EST15_19.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST20_21" xsi:type="File" fileName="Logs/EST20_21.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST22_23" xsi:type="File" fileName="Logs/EST22_23.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST24_28" xsi:type="File" fileName="Logs/EST24_28.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="EST29_32" xsi:type="File" fileName="Logs/EST29_32.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="PLC01" xsi:type="File" fileName="Logs/PLC01.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

		<target name="PLC02" xsi:type="File" fileName="Logs/PLC02.json">
			<layout xsi:type="JsonLayout">
				<attribute name="time" layout="${longdate}" />
				<attribute name="callsite" layout="${callsite:padding=-20}" />
				<attribute name="callsite-linenumber" layout="${callsite-linenumber}" />
				<attribute name="level" layout="${level:upperCase=true}"/>
				<attribute name="logger" layout="${message}" />
				<attribute name="exception" layout="${exception}" />
			</layout>
		</target>

	</targets>


	rules to map from logger name to target
	<rules>
		All logs, including from Microsoft
		<logger name="EST01" minlevel="Trace" writeTo="EST01" />

		<logger name="EST02_03" minlevel="Trace" writeTo="EST02_03" />

		<logger name="EST04_05" minlevel="Trace" writeTo="EST04_05" />

		<logger name="EST06_07" minlevel="Trace" writeTo="EST06_07" />

		<logger name="EST08_09" minlevel="Trace" writeTo="EST08_09" />

		<logger name="EST10_11" minlevel="Trace" writeTo="EST10_11" />

		<logger name="EST12_13" minlevel="Trace" writeTo="EST12_13" />

		<logger name="EST14" minlevel="Trace" writeTo="EST14" />

		<logger name="EST15_19" minlevel="Trace" writeTo="EST15_19" />

		<logger name="EST20_21" minlevel="Trace" writeTo="EST20_21" />

		<logger name="EST22_23" minlevel="Trace" writeTo="EST22_23" />

		<logger name="EST24_28" minlevel="Trace" writeTo="EST24_28" />

		<logger name="EST29_32" minlevel="Trace" writeTo="EST29_32" />

		<logger name="PLC01" minlevel="Trace" writeTo="PLC01" />

		<logger name="PLC02" minlevel="Trace" writeTo="PLC02" />
	</rules>
</nlog>